<!DOCTYPE html><html lang="en-us"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><title>v0.18: Better use of future knowledge - FlexMeasures</title><meta name="description" content="Version v0.18 of FlexMeasures advances the modeling of the flex optimization problem, adding more detail. If we have knowledge about future conditions and underlying physics, our optimization gets better when&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://flexmeasures.io/018-better-use-of-future-knowledge/"><link rel="alternate" type="application/atom+xml" href="https://flexmeasures.io/feed.xml"><link rel="alternate" type="application/json" href="https://flexmeasures.io/feed.json"><meta property="og:title" content="v0.18: Better use of future knowledge"><meta property="og:image" content="https://flexmeasures.io/media/posts/36/drew-beamer-xU5Mqq0Chck-unsplash.jpg"><meta property="og:image:width" content="5284"><meta property="og:image:height" content="3522"><meta property="og:site_name" content="FlexMeasures"><meta property="og:description" content="Version v0.18 of FlexMeasures advances the modeling of the flex optimization problem, adding more detail. If we have knowledge about future conditions and underlying physics, our optimization gets better when&hellip;"><meta property="og:url" content="https://flexmeasures.io/018-better-use-of-future-knowledge/"><meta property="og:type" content="article"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@seitabv"><meta name="twitter:title" content="v0.18: Better use of future knowledge"><meta name="twitter:description" content="Version v0.18 of FlexMeasures advances the modeling of the flex optimization problem, adding more detail. If we have knowledge about future conditions and underlying physics, our optimization gets better when&hellip;"><meta name="twitter:image" content="https://flexmeasures.io/media/posts/36/drew-beamer-xU5Mqq0Chck-unsplash.jpg"><style>:root{--primary-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--secondary-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}</style><link rel="stylesheet" href="https://flexmeasures.io/assets/css/fontawesome-all.min.css?v=dbf9d822cefe851ba6f66e1ad57e8987"><link rel="stylesheet" href="https://flexmeasures.io/assets/css/style.css?v=f294491bf2aaace2c249324545609f9e"><noscript><link rel="stylesheet" href="https://flexmeasures.io/assets/css/noscript.css?v=6228c7eee614cd200a2cad8333b439fa"></noscript><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://flexmeasures.io/018-better-use-of-future-knowledge/"},"headline":"v0.18: Better use of future knowledge","datePublished":"2023-12-19T13:32","dateModified":"2023-12-23T01:27","image":{"@type":"ImageObject","url":"https://flexmeasures.io/media/posts/36/drew-beamer-xU5Mqq0Chck-unsplash.jpg","height":3522,"width":5284},"description":"Version v0.18 of FlexMeasures advances the modeling of the flex optimization problem, adding more detail. If we have knowledge about future conditions and underlying physics, our optimization gets better when&hellip;","author":{"@type":"Person","name":"SeitaBV","url":"https://flexmeasures.io/authors/seitabv/"},"publisher":{"@type":"Organization","name":"SeitaBV"}}</script><style>#wrapper > .bg {
               background-image: url(https://flexmeasures.io/assets/images/overlay.png), linear-gradient(0deg, rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1)), url(https://flexmeasures.io/media/website/karsten-wurth-tzkyLKPvL4-unsplash-2.jpg);
           }</style><script>var _paq = window._paq = window._paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="//matomo.seita.nl/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '3']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
  })();</script></head><body class="is-preload"><div class="github-ribbon"><a target="_blank" href="https://github.com/FlexMeasures/flexmeasures/">View code on Github</a></div><div id="wrapper"><header id="header"><a class="logo" href="https://flexmeasures.io/">FlexMeasures</a></header><nav id="nav"><ul class="links"><li class="has-submenu"><a href="https://flexmeasures.io/" target="_self" aria-haspopup="true">Why?</a><ul class="nav__submenu level-2" aria-hidden="true"><li><a href="https://flexmeasures.io/plugins/" target="_self">Plugins</a></li><li><a href="https://flexmeasures.io/use-cases/" target="_self">Use cases</a></li><li><a href="https://flexmeasures.io/features-2/" target="_self">Features</a></li><li><a href="https://flexmeasures.io/why-is-the-code-of-flexmeasures-open-for-everyone/" target="_self">Open source</a></li></ul></li><li><a href="https://flexmeasures.io/documentation/" target="_self">Docs</a></li><li><a href="https://flexmeasures.io/tags/blogpost/" target="_self">Blog</a></li><li><a href="https://flexmeasures.io/plugins/" target="_self">Plugins</a></li><li><a href="https://flexmeasures.io/roadmap/" target="_self">Roadmap</a></li><li><a href="https://flexmeasures.io/faq/" target="_self">FAQ</a></li><li><a href="https://flexmeasures.io/get-in-touch/" target="_self">Contact</a></li></ul></nav><main id="main"><article class="post"><header class="major"><time datetime="2023-12-19T13:32" class="date">19 Dec 2023</time><h1>v0.18: Better use of future knowledge</h1><p class="post__inner"></p></header><figure class="image main"><img src="https://flexmeasures.io/media/posts/36/drew-beamer-xU5Mqq0Chck-unsplash.jpg" srcset="https://flexmeasures.io/media/posts/36/responsive/drew-beamer-xU5Mqq0Chck-unsplash-xs.jpg 300w, https://flexmeasures.io/media/posts/36/responsive/drew-beamer-xU5Mqq0Chck-unsplash-sm.jpg 480w, https://flexmeasures.io/media/posts/36/responsive/drew-beamer-xU5Mqq0Chck-unsplash-md.jpg 768w, https://flexmeasures.io/media/posts/36/responsive/drew-beamer-xU5Mqq0Chck-unsplash-lg.jpg 1024w, https://flexmeasures.io/media/posts/36/responsive/drew-beamer-xU5Mqq0Chck-unsplash-xl.jpg 1360w" sizes="(max-width: 1360px) 100vw, 1360px" loading="lazy" height="3522" width="5284" alt="A better view of the future"><figcaption>A better view of the future by Drew Beamer, Unsplash</figcaption></figure><div class="post__inner post__entry"><div class="post__inner post__entry"><p>Version v0.18 of FlexMeasures advances the modeling of the flex optimization problem, adding more detail. If we have knowledge about future conditions and underlying physics, our optimization gets better when we put that to use!</p><p>We also improved navigation in the UI, which is really handy for more complex asset structures.</p><p><a href="https://flexmeasures.readthedocs.io/en/latest/changelog.html#v0-18-0-december-21-2023" target="_blank" rel="noopener noreferrer">See the changelog</a> for a complete list. Read on below about the larger new features we added.</p><h2>Future knowledge in scheduling</h2><p>FlexMeasures lets you describe the underlying flexibility problem, so that the internal scheduler knows within what limits to work to find the best solution for the upcoming hours. Earlier, we introduced two data specifications for this, the <code>flex-model</code> (what are the limits and goal around this asset, e.g. maximal state of charge?) and the <code>flex-context</code> (what is also relevant, e.g. prices?). We wrote <a href="https://flexmeasures.readthedocs.io/en/latest/api/v2g.html" target="_blank" rel="noopener noreferrer">a tutorial with nice examples</a> around the V2G use case.</p><p>Now. we have enhanced the flex-model with three new (or more nuanced) types of information, which lets FlexMeasures handle a wider range of modern energy flexibility problems. We also let them be sensors, instead of just one constant value. But more about that later, first let me introduce the new kinds of flex-model information:</p><h3>External in- and output for storage</h3><p>We can model storage assets which only serve the flexibility of the main system, e.g. a battery which only exists to simply buffer solar energy for self-consumption at some later time. The battery has no strict dependencies outside of our energy flexibility asset model.</p><p>But often, storage (also) serves an external and crucial purpose. A good example is a hot water tank. Comfort of the home occupants is the main goal, consuming energy to create heat at the best time is also important, but secondary.</p><p>Thus, the expected extraction of energy (as heat) from the storage is an important input to the modeling problem ― it will form a constraint. In this example, the input of energy (as electricity) is dynamic, and can be timed optimally to lower the energy costs and/pr CO2.</p><p>To handle these situations optimally, we introduced fields in the flex model to represent an expected extraction of stored energy (e.g. when we know the occupants are at home), or even addition (e.g. when an industrial process will add heat) ― we called them <span class="blob-code-inner blob-code-marker js-code-nav-pass" data-code-marker="+"><code><span class="pl-c1">soc-usage</span></code> and <span class="pl-c1"><code><span class="pl-token">soc</span>-gain</code><span class="pl-token">. This makes the flex model much more expressive. Obviously, these fields only work with the <code>StorageScheduler</code>.</span></span></span></p><h3>Energy conversion efficiency</h3><div>We noticed that the efficiency of turning electricity into usable energy is a crucial modelling factor, especially when modeling smart heating problems. <br>in earlier version, we supported conversion losses with a constant <span class="blob-code-inner blob-code-marker js-code-nav-pass" data-code-marker="+"><span class="pl-en"><span class="pl-s"><code>roundtrip-efficiency</code></span></span></span> value. Used as a percentage, this works well enough for batteries or even for heat losses that happen in an inverter.</div><div> </div><div>As an example where that breaks down, consider that the COP of Heat Pumps typically depends <em>strongly</em> on the outside temperature. To be able to model this more precisely within the optimization problem (losses are a crucial detail here), you can now use <span class="blob-code-inner blob-code-marker js-code-nav-pass" data-code-marker="+"><span class="pl-en"><span class="pl-s"><code>charging-efficiency</code> and <code>discharging-efficiency</code> separately, <span style="text-decoration: underline;">and</span> they can be time series (more about that below). The latter feature is what you need if the conditions for energy conversion efficiency are not constant, like outside temperature.</span></span></span></div><h3>Consumption and production capacities</h3><p>Until now, only one kind of maximal capacity was possible (for example, to describe a limit to the grid connection). We used the field <code>power-capacity</code>, and it had to have one constant value, e.g. 25 kW.</p></div><div><br>We made this more expressive. Look at the example below. </div><div class="post__inner post__entry"><pre class="notranslate"><code class="notranslate">{
    "flex-model": {
        "consumption-capacity": "25 kW",
        "production-capacity": {"sensor": 51}
    }
}</code></pre>We can now differentiate between limits on production and consumption. <code>power-capacity</code>still works ― if it is given, it would serve as a limit on the other two.</div><div> </div><h3>Varying values over time!</h3><div class="post__inner post__entry">Look at the above example for <code>production-capacity</code> again. This is not a constant value, but references a sensor. The added value here is that the allowed production capacity can vary over time.</div><div class="post__inner post__entry">This might soon be relevant in practice, as DSOs offer network contracts in which businesses have a varying grid connection capacity! (next to offering, they might even force businesses to use them, if grid congestion is high).</div><div> </div><div class="post__inner post__entry">But also for the two other examples we discussed above (where values can also be a constant number or a sensor from now on), a varying series of values might help you model reality more closely.</div><div class="post__inner post__entry"><p>This work was done in Pull Requests <a href="http://www.github.com/flexmeasures/flexmeasures/pull/906" target="_blank" rel="noopener noreferrer">906,</a> <a href="http://www.github.com/flexmeasures/flexmeasures/pull/933" target="_blank" rel="noopener noreferrer">933</a> and <a href="http://www.github.com/flexmeasures/flexmeasures/pull/897" target="_blank" rel="noopener noreferrer">897</a>. </p><h2>UI navigation of complex sites</h2><p>Behind the scenes, we work with more complex asset structures. We have introduced the capability of assets being the child of another asset. Now, tree-like structures can be built (where sensors are the leaves, usually) in order to model whole sites or different scenarios for simulation projects.</p><p>This also calls for efforts to navigate this structures. We are looking to develop a visual representation of this tree-structure. But until we get there, we made it easier to navigate the structure.</p><p>First, we introduced a breadcrump-bar above the asset and sensor pages. This example has the account, the asset and the currently shown sensor:</p><figure class="post__image post__image--center"><img loading="lazy" src="https://flexmeasures.io/media/posts/36/breadcrump-example.png" alt="Breadcrumps bar in FlexMeasures" width="500" height="172" sizes="(max-width: 48em) 100vw, 768px" srcset="https://flexmeasures.io/media/posts/36/responsive/breadcrump-example-xs.png 300w, https://flexmeasures.io/media/posts/36/responsive/breadcrump-example-sm.png 480w, https://flexmeasures.io/media/posts/36/responsive/breadcrump-example-md.png 768w, https://flexmeasures.io/media/posts/36/responsive/breadcrump-example-lg.png 1024w, https://flexmeasures.io/media/posts/36/responsive/breadcrump-example-xl.png 1360w, https://flexmeasures.io/media/posts/36/responsive/breadcrump-example-2xl.png 1600w"></figure><p>Second, we made lists of assets and sensors easy to click. The whole row will now react to one simple click and take you where you want to go!</p><p>This work was done in Pull Request <a href="http://www.github.com/flexmeasures/flexmeasures/pull/930" target="_blank" rel="noopener noreferrer">930</a> and <a href="http://www.github.com/flexmeasures/flexmeasures/pull/923" target="_blank" rel="noopener noreferrer">923</a>.</p><p> </p><p> </p></div></div></article></main><footer id="copyright"><ul><li>© Massively</li><li>Design: <a href="https://html5up.net" target="_blank" rel="nofollow noopener">HTML5 UP</a></li><li>Powered by <a href="https://getpublii.com" target="_blank" rel="nofollow noopener">Publii</a></li><li>Follow updates by <a href="https://flexmeasures.io/feed.xml" title="Our RSS feed" target="_blank" rel="noopener">RSS</a></li></ul></footer></div><script src="https://flexmeasures.io/assets/js/jquery.min.js?v=220afd743d9e9643852e31a135a9f3ae"></script><script src="https://flexmeasures.io/assets/js/jquery.scrollex.min.js?v=f89065e3d988006af9791b44561d7c90"></script><script src="https://flexmeasures.io/assets/js/jquery.scrolly.min.js?v=1ed5a78bde1476875a40f6b9ff44fc14"></script><script src="https://flexmeasures.io/assets/js/browser.min.js?v=c07298dd19048a8a69ad97e754dfe8d0"></script><script src="https://flexmeasures.io/assets/js/breakpoints.min.js?v=81a479eb099e3b187613943b085923b8"></script><script src="https://flexmeasures.io/assets/js/util.min.js?v=4201a626f8c9b614a663b3a1d7d82615"></script><script src="https://flexmeasures.io/assets/js/main.min.js?v=149e72e3ae18744a477b480b19e0c6da"></script><script>/*<![CDATA[*/var images=document.querySelectorAll("img[loading]");for(var i=0;i<images.length;i++){if(images[i].complete){images[i].classList.add("is-loaded")}else{images[i].addEventListener("load",function(){this.classList.add("is-loaded")},false)}};/*]]>*/</script><script type="text/javascript">$('.post__inner:has(.post__iframe)').css('max-width', 'none');</script></body></html>