<!DOCTYPE html><html lang="en-us"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><title>v0.16: Profit-Loss Reporter - FlexMeasures</title><meta name="description" content="Version v0.16 of FlexMeasures advances the state of art on reporting by offering a very useful implementation (and a tutorial how to bring it to practice). We also add a&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://flexmeasures.io/016-profitloss-reporter/"><link rel="alternate" type="application/atom+xml" href="https://flexmeasures.io/feed.xml"><link rel="alternate" type="application/json" href="https://flexmeasures.io/feed.json"><meta property="og:title" content="v0.16: Profit-Loss Reporter"><meta property="og:image" content="https://flexmeasures.io/media/posts/34/towfiqu-barbhuiya-joqWSI9u_XM-unsplash.jpg"><meta property="og:image:width" content="4592"><meta property="og:image:height" content="3064"><meta property="og:site_name" content="FlexMeasures"><meta property="og:description" content="Version v0.16 of FlexMeasures advances the state of art on reporting by offering a very useful implementation (and a tutorial how to bring it to practice). We also add a&hellip;"><meta property="og:url" content="https://flexmeasures.io/016-profitloss-reporter/"><meta property="og:type" content="article"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@seitabv"><meta name="twitter:title" content="v0.16: Profit-Loss Reporter"><meta name="twitter:description" content="Version v0.16 of FlexMeasures advances the state of art on reporting by offering a very useful implementation (and a tutorial how to bring it to practice). We also add a&hellip;"><meta name="twitter:image" content="https://flexmeasures.io/media/posts/34/towfiqu-barbhuiya-joqWSI9u_XM-unsplash.jpg"><style>:root{--primary-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--secondary-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}</style><link rel="stylesheet" href="https://flexmeasures.io/assets/css/fontawesome-all.min.css?v=dbf9d822cefe851ba6f66e1ad57e8987"><link rel="stylesheet" href="https://flexmeasures.io/assets/css/style.css?v=f294491bf2aaace2c249324545609f9e"><noscript><link rel="stylesheet" href="https://flexmeasures.io/assets/css/noscript.css?v=6228c7eee614cd200a2cad8333b439fa"></noscript><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://flexmeasures.io/016-profitloss-reporter/"},"headline":"v0.16: Profit-Loss Reporter","datePublished":"2023-09-26T16:05","dateModified":"2023-09-28T14:38","image":{"@type":"ImageObject","url":"https://flexmeasures.io/media/posts/34/towfiqu-barbhuiya-joqWSI9u_XM-unsplash.jpg","height":3064,"width":4592},"description":"Version v0.16 of FlexMeasures advances the state of art on reporting by offering a very useful implementation (and a tutorial how to bring it to practice). We also add a&hellip;","author":{"@type":"Person","name":"SeitaBV","url":"https://flexmeasures.io/authors/seitabv/"},"publisher":{"@type":"Organization","name":"SeitaBV"}}</script><style>#wrapper > .bg {
               background-image: url(https://flexmeasures.io/assets/images/overlay.png), linear-gradient(0deg, rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1)), url(https://flexmeasures.io/media/website/karsten-wurth-tzkyLKPvL4-unsplash-2.jpg);
           }</style><script>var _paq = window._paq = window._paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="//matomo.seita.nl/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '3']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
  })();</script></head><body class="is-preload"><div class="github-ribbon"><a target="_blank" href="https://github.com/FlexMeasures/flexmeasures/">View code on Github</a></div><div id="wrapper"><header id="header"><a class="logo" href="https://flexmeasures.io/">FlexMeasures</a></header><nav id="nav"><ul class="links"><li class="has-submenu"><a href="https://flexmeasures.io/" target="_self" aria-haspopup="true">Why?</a><ul class="nav__submenu level-2" aria-hidden="true"><li><a href="https://flexmeasures.io/plugins/" target="_self">Plugins</a></li><li><a href="https://flexmeasures.io/use-cases/" target="_self">Use cases</a></li><li><a href="https://flexmeasures.io/features-2/" target="_self">Features</a></li><li><a href="https://flexmeasures.io/why-is-the-code-of-flexmeasures-open-for-everyone/" target="_self">Open source</a></li></ul></li><li><a href="https://flexmeasures.io/documentation/" target="_self">Docs</a></li><li><a href="https://flexmeasures.io/tags/blogpost/" target="_self">Blog</a></li><li><a href="https://flexmeasures.io/plugins/" target="_self">Plugins</a></li><li><a href="https://flexmeasures.io/roadmap/" target="_self">Roadmap</a></li><li><a href="https://flexmeasures.io/faq/" target="_self">FAQ</a></li><li><a href="https://flexmeasures.io/get-in-touch/" target="_self">Contact</a></li></ul></nav><main id="main"><article class="post"><header class="major"><time datetime="2023-09-26T16:05" class="date">26 Sep 2023</time><h1>v0.16: Profit-Loss Reporter</h1><p class="post__inner"></p></header><figure class="image main"><img src="https://flexmeasures.io/media/posts/34/towfiqu-barbhuiya-joqWSI9u_XM-unsplash.jpg" srcset="https://flexmeasures.io/media/posts/34/responsive/towfiqu-barbhuiya-joqWSI9u_XM-unsplash-xs.jpg 300w, https://flexmeasures.io/media/posts/34/responsive/towfiqu-barbhuiya-joqWSI9u_XM-unsplash-sm.jpg 480w, https://flexmeasures.io/media/posts/34/responsive/towfiqu-barbhuiya-joqWSI9u_XM-unsplash-md.jpg 768w, https://flexmeasures.io/media/posts/34/responsive/towfiqu-barbhuiya-joqWSI9u_XM-unsplash-lg.jpg 1024w, https://flexmeasures.io/media/posts/34/responsive/towfiqu-barbhuiya-joqWSI9u_XM-unsplash-xl.jpg 1360w" sizes="(max-width: 1360px) 100vw, 1360px" loading="lazy" height="3064" width="4592" alt="Green profit, as a plant grows from coins in a jar "><figcaption>by Towfiqu barbhuiya, Unsplash</figcaption></figure><div class="post__inner post__entry"><div class="post__inner post__entry"><p>Version v0.16 of FlexMeasures advances the state of art on reporting by offering a very useful implementation (and a tutorial how to bring it to practice). We also add a command to get charts via the CLI and add capacity limits as a field in the flex context.</p><p><a href="https://flexmeasures.readthedocs.io/en/latest/changelog.html#v0-16-0-september-27-2023" target="_blank" rel="noopener noreferrer">See changelog</a> for a complete list or read on below about the larger new features we added.</p><h2>ProfitLoss reporter &amp; Tutorial</h2><p>Reporting capabilities were introduced in <a href="https://flexmeasures.io/014-reporting-power/" target="_blank" rel="noopener noreferrer">v0.14</a>. We are continuing to make it more useful. We already made it possible to have a reporter aggregate sensors (<code><cite>AggregatorReporter</cite></code>) or use Pandas methods on sensor data (<code><cite>PandasReporter</cite></code>) ― this had a lot of power so KPIs could be made.</p><p>In this version, we added an implementation that should cover a use case right off the shelf for almost everyone using FlexMeasures: a reporter to compute how profitable your operation has been (<em><code>ProfitLossReporter</code></em>). Showing the results of optimization is a crucial feature, and now easier than ever.</p><p>We also wrote <a href="https://flexmeasures.readthedocs.io/en/latest/tut/toy-example-reporter.html" target="_blank" rel="noopener noreferrer">a tutorial</a> for using it in your installation. Here are some excerpts (note that that tutorial also shows other reporting types).</p><p>First, reporters can now be stored as data sources, so they are easy to be used repeatedly and the data they generate can reference them. Our data source has "ProfitLossReporter" as Model and these attributes (the least a ProfitLossReporter needs to know is a price): </p><pre id="codecell2"><span class="o">{</span>
<span class="s2">   "data_generator"</span>: <span class="o">{</span>
<span class="s2">     "config"</span>: <span class="o">{</span>
<span class="s2">       "consumption_price_sensor"</span>: <span class="m">1<br></span>     <span class="o">}<br></span><span class="o">   }<br></span><span class="o">}</span></pre><p>And here is excerpts from the tutorial in how to configure and create a report:</p><div class="highlight-bash notranslate"><div class="highlight"><pre>$ <span class="nb">echo</span> <span class="s2">"</span>
$<span class="s2"> {</span>
$<span class="s2">     'input' : [{'sensor' : 4}],</span>
$<span class="s2">     'output' : [{'sensor' : 9}]</span>
$<span class="s2"> }"</span> &gt; inflexible-parameters.json</pre></div><div><p><cite>The input</cite> sensor stores the power/energy flow, and the <cite>output</cite> sensor will store the report.</p></div></div><div class="highlight-bash notranslate"><div class="highlight"><pre id="codecell7">$ flexmeasures add report --source <span class="m">6</span> <span class="se">\</span>
   --parameters inflexible-parameters.json <span class="se">\</span>
   --start-offset DB,1D --end-offset DB,2D
</pre></div></div><p>With these offsets, we indicate that we want the report to encompass the day of tomorrow (see Pandas offset strings). The chart below then shows all costs which we know will be made tomorrow by the simple process scheduler in the tutorial.</p><figure class="post__image post__image--center"><img loading="lazy" src="https://flexmeasures.io/media/posts/34/sensor-data-inflexible.png" alt="Simple profit reporter chart" width="750" height="314" sizes="(max-width: 48em) 100vw, 768px" srcset="https://flexmeasures.io/media/posts/34/responsive/sensor-data-inflexible-xs.png 300w, https://flexmeasures.io/media/posts/34/responsive/sensor-data-inflexible-sm.png 480w, https://flexmeasures.io/media/posts/34/responsive/sensor-data-inflexible-md.png 768w, https://flexmeasures.io/media/posts/34/responsive/sensor-data-inflexible-lg.png 1024w, https://flexmeasures.io/media/posts/34/responsive/sensor-data-inflexible-xl.png 1360w, https://flexmeasures.io/media/posts/34/responsive/sensor-data-inflexible-2xl.png 1600w"></figure><p>This work was done in Pull Requests <a href="http://www.github.com/flexmeasures/flexmeasures/pull/808" target="_blank" rel="noopener noreferrer">808</a>, <a href="http://www.github.com/flexmeasures/flexmeasures/pull/825" target="_blank" rel="noopener noreferrer">825</a>, and <a href="http://www.github.com/flexmeasures/flexmeasures/pull/818" target="_blank" rel="noopener noreferrer">818</a>. </p><h2>Charts via the CLI</h2><p>For documentation purposes, generating charts is sometimes very useful. For instance, we might want to send a chart to a client (in lieu of them having an account set up and us sending a link to the chart). Or we are supposed to create a Word document.</p><p>The new command <code class="notranslate">flexmeasures show chart</code> can export sensor and asset charts. <br>Here is an example:</p><p><code>flexmeasures show chart --start 2023-08-15T00:00:00+02:00 --end 2023-08-16T00:00:00+02:00 --asset 1 --sensor 14 --sensor 15 --filename 'chart-$now-$entity_type-$id.png'</code></p><p>This work was done in Pull Request <a href="http://www.github.com/flexmeasures/flexmeasures/pull/833" target="_blank" rel="noopener noreferrer">833</a>.</p><h2>Capacity limits as a field in the flex context</h2><p>The limit to a storage device or the grid connection are crucial information for FlexMeasures' algorithm. The way this could be encoded before was not very user-friendly (as asset or sensor attribute). We have now added the fields <code class="notranslate">power_capacity</code> (on the flex-model) and <code class="notranslate">site_power_capacity</code>(on the flex context), respectively, so that the flex model can encode this explicitly (the flex model can be sent to the API when triggering schedules and soon be stored on the asset itself).</p><p>This work was done in Pull Requests <a href="http://www.github.com/flexmeasures/flexmeasures/pull/850" target="_blank" rel="noopener noreferrer">850</a>.</p></div></div></article></main><footer id="copyright"><ul><li>© Massively</li><li>Design: <a href="https://html5up.net" target="_blank" rel="nofollow noopener">HTML5 UP</a></li><li>Powered by <a href="https://getpublii.com" target="_blank" rel="nofollow noopener">Publii</a></li><li>Follow updates by <a href="https://flexmeasures.io/feed.xml" title="Our RSS feed" target="_blank" rel="noopener">RSS</a></li></ul></footer></div><script src="https://flexmeasures.io/assets/js/jquery.min.js?v=220afd743d9e9643852e31a135a9f3ae"></script><script src="https://flexmeasures.io/assets/js/jquery.scrollex.min.js?v=f89065e3d988006af9791b44561d7c90"></script><script src="https://flexmeasures.io/assets/js/jquery.scrolly.min.js?v=1ed5a78bde1476875a40f6b9ff44fc14"></script><script src="https://flexmeasures.io/assets/js/browser.min.js?v=c07298dd19048a8a69ad97e754dfe8d0"></script><script src="https://flexmeasures.io/assets/js/breakpoints.min.js?v=81a479eb099e3b187613943b085923b8"></script><script src="https://flexmeasures.io/assets/js/util.min.js?v=4201a626f8c9b614a663b3a1d7d82615"></script><script src="https://flexmeasures.io/assets/js/main.min.js?v=149e72e3ae18744a477b480b19e0c6da"></script><script>/*<![CDATA[*/var images=document.querySelectorAll("img[loading]");for(var i=0;i<images.length;i++){if(images[i].complete){images[i].classList.add("is-loaded")}else{images[i].addEventListener("load",function(){this.classList.add("is-loaded")},false)}};/*]]>*/</script><script type="text/javascript">$('.post__inner:has(.post__iframe)').css('max-width', 'none');</script></body></html>