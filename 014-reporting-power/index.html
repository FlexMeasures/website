<!DOCTYPE html><html lang="en-us"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><title>v0.14: Reporting power - FlexMeasures</title><meta name="description" content="Version v0.14 of FlexMeasures begins a major upgrade in reporting capability. Also, this version begins work to support scheduling of heat storage. Finally, we added a bunch of developer support&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://flexmeasures.io/014-reporting-power/"><link rel="alternate" type="application/atom+xml" href="https://flexmeasures.io/feed.xml"><link rel="alternate" type="application/json" href="https://flexmeasures.io/feed.json"><meta property="og:title" content="v0.14: Reporting power"><meta property="og:image" content="https://flexmeasures.io/media/posts/31/mike-tinnion-3ym6i13Y9LU-unsplash-xl.jpg"><meta property="og:image:width" content="1360"><meta property="og:image:height" content="930"><meta property="og:site_name" content="FlexMeasures"><meta property="og:description" content="Version v0.14 of FlexMeasures begins a major upgrade in reporting capability. Also, this version begins work to support scheduling of heat storage. Finally, we added a bunch of developer support&hellip;"><meta property="og:url" content="https://flexmeasures.io/014-reporting-power/"><meta property="og:type" content="article"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@seitabv"><meta name="twitter:title" content="v0.14: Reporting power"><meta name="twitter:description" content="Version v0.14 of FlexMeasures begins a major upgrade in reporting capability. Also, this version begins work to support scheduling of heat storage. Finally, we added a bunch of developer support&hellip;"><meta name="twitter:image" content="https://flexmeasures.io/media/posts/31/mike-tinnion-3ym6i13Y9LU-unsplash-xl.jpg"><style>:root{--primary-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--secondary-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}</style><link rel="stylesheet" href="https://flexmeasures.io/assets/css/fontawesome-all.min.css?v=dbf9d822cefe851ba6f66e1ad57e8987"><link rel="stylesheet" href="https://flexmeasures.io/assets/css/style.css?v=f294491bf2aaace2c249324545609f9e"><noscript><link rel="stylesheet" href="https://flexmeasures.io/assets/css/noscript.css?v=6228c7eee614cd200a2cad8333b439fa"></noscript><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://flexmeasures.io/014-reporting-power/"},"headline":"v0.14: Reporting power","datePublished":"2023-06-11T12:57","dateModified":"2024-02-08T16:09","image":{"@type":"ImageObject","url":"https://flexmeasures.io/media/posts/31/mike-tinnion-3ym6i13Y9LU-unsplash-xl.jpg","height":930,"width":1360},"description":"Version v0.14 of FlexMeasures begins a major upgrade in reporting capability. Also, this version begins work to support scheduling of heat storage. Finally, we added a bunch of developer support&hellip;","author":{"@type":"Person","name":"SeitaBV","url":"https://flexmeasures.io/authors/seitabv/"},"publisher":{"@type":"Organization","name":"SeitaBV"}}</script><style>#wrapper > .bg {
               background-image: url(https://flexmeasures.io/assets/images/overlay.png), linear-gradient(0deg, rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1)), url(https://flexmeasures.io/media/website/karsten-wurth-tzkyLKPvL4-unsplash-2.jpg);
           }</style><script>var _paq = window._paq = window._paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="//matomo.seita.nl/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '3']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
  })();</script></head><body class="is-preload"><div class="github-ribbon"><a target="_blank" href="https://github.com/FlexMeasures/flexmeasures/">View code on Github</a></div><div id="wrapper"><header id="header"><a class="logo" href="https://flexmeasures.io/">FlexMeasures</a></header><nav id="nav"><ul class="links"><li class="has-submenu"><a href="https://flexmeasures.io/" target="_self" aria-haspopup="true">Why?</a><ul class="nav__submenu level-2" aria-hidden="true"><li><a href="https://flexmeasures.io/plugins/" target="_self">Plugins</a></li><li><a href="https://flexmeasures.io/use-cases/" target="_self">Use cases</a></li><li><a href="https://flexmeasures.io/features-2/" target="_self">Features</a></li><li><a href="https://flexmeasures.io/why-is-the-code-of-flexmeasures-open-for-everyone/" target="_self">Open source</a></li></ul></li><li><a href="https://flexmeasures.io/documentation/" target="_self">Docs</a></li><li><a href="https://flexmeasures.io/tags/blogpost/" target="_self">Blog</a></li><li><a href="https://flexmeasures.io/plugins/" target="_self">Plugins</a></li><li><a href="https://flexmeasures.io/roadmap/" target="_self">Roadmap</a></li><li><a href="https://flexmeasures.io/faq/" target="_self">FAQ</a></li><li><a href="https://flexmeasures.io/get-in-touch/" target="_self">Contact</a></li></ul></nav><main id="main"><article class="post"><header class="major"><time datetime="2023-06-11T12:57" class="date">11 Jun 2023</time><h1>v0.14: Reporting power</h1><p class="post__inner"></p></header><figure class="image main"><img src="https://flexmeasures.io/media/posts/31/mike-tinnion-3ym6i13Y9LU-unsplash-xl.jpg" srcset="https://flexmeasures.io/media/posts/31/responsive/mike-tinnion-3ym6i13Y9LU-unsplash-xl-xs.jpg 300w, https://flexmeasures.io/media/posts/31/responsive/mike-tinnion-3ym6i13Y9LU-unsplash-xl-sm.jpg 480w, https://flexmeasures.io/media/posts/31/responsive/mike-tinnion-3ym6i13Y9LU-unsplash-xl-md.jpg 768w, https://flexmeasures.io/media/posts/31/responsive/mike-tinnion-3ym6i13Y9LU-unsplash-xl-lg.jpg 1024w, https://flexmeasures.io/media/posts/31/responsive/mike-tinnion-3ym6i13Y9LU-unsplash-xl-xl.jpg 1360w" sizes="(max-width: 1360px) 100vw, 1360px" loading="lazy" height="930" width="1360" alt="Report / Notebook"><figcaption>By Mike Tinnion</figcaption></figure><div class="post__inner post__entry"><p>Version v0.14 of FlexMeasures begins a major upgrade in <span style="text-decoration: underline;">reporting capability.</span> Also, this version begins work to support scheduling of <span style="text-decoration: underline;">heat storage</span>. Finally, we added a bunch of <span style="text-decoration: underline;">developer support</span> features.</p><p><a href="https://flexmeasures.readthedocs.io/en/latest/changelog.html#v0-14-0-june-15-2023" target="_blank" rel="noopener noreferrer">See changelog</a> for a complete list or read on below about the larger new features we added.</p><h2>Reporting</h2><p>FlexMeasures feeds upon raw measurement data (e.g. solar generation) and data from third parties (e.g. weather forecasts). They come together in the FlexMeasures scheduling algorithms.</p><p>However, there are more use cases for enriching these data by combining them:</p><ol><li>Pre-calculations: E.g. from a tariff and some tax rules we compute the real financial impact of price data.</li><li>Post-calculations: To be able to show the customer value, we regularly want to compute things like money or CO2 saved.</li></ol><p>These calculations can be done with code, but there'll be many repetitions. </p><p>We now added an infrastructure that allows us to define computation pipelines (see an example below) and CLI commands for developers to list available reporters and trigger their computations regularly:</p><ul><li><code><span class="blob-code-inner blob-code-marker js-code-nav-pass" data-code-marker="+"><span class="pl-c1">flexmeasures show reporters</span></span></code></li><li><code><span class="blob-code-inner blob-code-marker js-code-nav-pass" data-code-marker="+"><span class="pl-c1">flexmeasures add report</span></span></code></li></ul><p>The reporter classes we are designing are using pandas under the hood and can be sub-classed, allowing us to build new reporters from stable simpler ones, and even pipelines. Remember: <em>re-use is developer power</em>!</p><p>We believe this infrastructure will become very powerful and enable FlexMeasures hosters and plugin developers to implement exciting new features.</p><p>So here is a glimpse into a reporter we made - it is based on the <code>AggregatorReporter</code> (which is for the combination of any two sensors).</p><p>This simplified example reporter basically calculates <code>pv - consumption</code> at grid connection point. This tells us how much solar power we fed back to the grid (positive values) and/or the amount of grid power within the overall consumption which did not come from local solar panels (negative values).</p><p>First, this is the configuration of how the computation works:</p><pre class="notranslate">    {<br>        "method" : "sum",<br>        "weights" : {<br>            "pv" : 1.0,<br>            "consumption" : -1.0<br>        }<br>    }</pre><p>Second, this parameterizes the computation (fro which sensors does data come from, which range &amp; where does it go):</p><pre><code>    {</code><br><code>        "input": [</code><br><code>            {</code><br><code>                "name" : "pv",</code><br><code>                "sensor": 1,</code><br><code>                "source" : 1,</code><br><code>            },</code><br><code>            {</code><br><code>                "name" : "consumption",</code><br><code>                "sensor": 1,</code><br><code>                "source" : 2,</code><br><code>            }</code><br><code>        ],</code><br><code>        "output": [</code><br><code>            {</code><br><code>                "sensor": 3,</code><br><code>            }</code><br><code>        ],</code><br><code>        "start" : "2023-01-01T00:00:00+00:00",</code><br><code>        "end" : "2023-01-03T00:00:00+00:00",</code><br><code>    }</code><br><br></pre><p>Much more elaborate reporters are possible to be done this way, and we will showcase more later. </p><p>This work was done in Pull Requests <a href="http://www.github.com/flexmeasures/flexmeasures/pull/641" target="_blank" rel="noopener noreferrer">641</a>, <a href="http://www.github.com/flexmeasures/flexmeasures/pull/659" target="_blank" rel="noopener noreferrer">659</a>, <a href="http://www.github.com/flexmeasures/flexmeasures/pull/712" target="_blank" rel="noopener noreferrer">712</a> and <a href="http://www.github.com/flexmeasures/flexmeasures/pull/686" target="_blank" rel="noopener noreferrer">686</a>. </p><p>P.S. We are not done. You are invited to follow along in <a href="https://github.com/FlexMeasures/flexmeasures/discussions/662">the current discussion</a>, where you'll find new ideas like the <code class="notranslate">EnergyBillReporter</code>or the <code>CO2Reporter</code>. We might even support YAML for even higher readability!</p><h2>Working on heat scheduling: storage efficiency</h2><p>Optimizing heat storage is our next big goal, after our work towards batteries. </p><p>We have decided to extend the in-built storage scheduling algorithm towards this goal. There might be other approaches for solving some complex heat storage configurations with custom advanced algorithms, but we believe that a majority of cases can be solved in-built.</p><p>The first action was to support the buffer-like behavior of heat storage, namely that energy (heat) is being lost over time. This lead to the new parameter <code>storage-efficiency</code>, which is now part of the <a href="https://flexmeasures.readthedocs.io/en/latest/api/notation.html#flex-model">flex model</a>. So now we can express that a hot water storage tank will lose around 1% of the stored heat per day. This will be reflected in what the scheduler finds to be optimal.</p><p>This work was done in Pull Request <a href="http://www.github.com/flexmeasures/flexmeasures/pull/679">679</a>.</p><h2>Developer support: docs, packaging</h2><p>We extended the core team that works on FlexMeasures, and that is always an opportunity to spot problems in the support for developers. We added two main improvements:</p><ul><li>Better developer docs, making it easier to install FlexMeasures and understand what it's doing (Pull Requests <a href="http://www.github.com/flexmeasures/flexmeasures/pull/664">664</a>, <a href="http://www.github.com/flexmeasures/flexmeasures/pull/665">665</a>, <a href="http://www.github.com/flexmeasures/flexmeasures/pull/676">676</a>, <a href="http://www.github.com/flexmeasures/flexmeasures/pull/687">687</a>, <a href="http://www.github.com/flexmeasures/flexmeasures/pull/698">698</a>)</li><li>Packaging improvements, making it easier to use FlexMeasures in deployments (Pull Requests: <a href="http://www.github.com/flexmeasures/flexmeasures/pull/670">670</a>, <a href="http://www.github.com/flexmeasures/flexmeasures/pull/671">671</a>)</li></ul><h2>API sunsetting</h2><p>Finally, as <a href="https://flexmeasures.readthedocs.io/en/latest/dev/note-on-datamodel-transition.html#note-on-datamodel-transition">our long journey to a more flexible datamodel</a> is coming close to completion, we are sunsetting (as we pre-announced in version 0.12) API versions below 3. Please help your users upgrade to API version 3 before you use FlexMeasures v0.14!</p><p>While version 0.13 still allowed hosts to get the sunset endpoints back if needed, we now have sunsetted them and they return HTTP status code 410 by default.</p><p>We compiled <a href="https://flexmeasures.readthedocs.io/en/latest/api/introduction.html#deprecation-and-sunset" target="_blank" rel="noopener noreferrer">some helpful information for FlexMeasures hosts </a>to manage this transition well.  </p><p>This work was done in Pull Request <a href="http://www.github.com/flexmeasures/flexmeasures/pull/667">667</a>.</p><p> </p></div></article></main><footer id="copyright"><ul><li>© Massively</li><li>Design: <a href="https://html5up.net" target="_blank" rel="nofollow noopener">HTML5 UP</a></li><li>Powered by <a href="https://getpublii.com" target="_blank" rel="nofollow noopener">Publii</a></li><li>Follow updates by <a href="https://flexmeasures.io/feed.xml" title="Our RSS feed" target="_blank" rel="noopener">RSS</a></li></ul></footer></div><script src="https://flexmeasures.io/assets/js/jquery.min.js?v=220afd743d9e9643852e31a135a9f3ae"></script><script src="https://flexmeasures.io/assets/js/jquery.scrollex.min.js?v=f89065e3d988006af9791b44561d7c90"></script><script src="https://flexmeasures.io/assets/js/jquery.scrolly.min.js?v=1ed5a78bde1476875a40f6b9ff44fc14"></script><script src="https://flexmeasures.io/assets/js/browser.min.js?v=c07298dd19048a8a69ad97e754dfe8d0"></script><script src="https://flexmeasures.io/assets/js/breakpoints.min.js?v=81a479eb099e3b187613943b085923b8"></script><script src="https://flexmeasures.io/assets/js/util.min.js?v=4201a626f8c9b614a663b3a1d7d82615"></script><script src="https://flexmeasures.io/assets/js/main.min.js?v=149e72e3ae18744a477b480b19e0c6da"></script><script>/*<![CDATA[*/var images=document.querySelectorAll("img[loading]");for(var i=0;i<images.length;i++){if(images[i].complete){images[i].classList.add("is-loaded")}else{images[i].addEventListener("load",function(){this.classList.add("is-loaded")},false)}};/*]]>*/</script><script type="text/javascript">$('.post__inner:has(.post__iframe)').css('max-width', 'none');</script></body></html>