<!DOCTYPE html><html lang="en-us"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><title>v0.15: Process scheduling &amp; Heatmap - FlexMeasures</title><meta name="description" content="Version v0.15 of FlexMeasures brings the ability to schedule energy processes and adds a new data visualization: Daily activity heatmap. Finally, we add API support for managing sensors. See changelog&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://flexmeasures.io/015-process-scheduling-heatmap/"><link rel="alternate" type="application/atom+xml" href="https://flexmeasures.io/feed.xml"><link rel="alternate" type="application/json" href="https://flexmeasures.io/feed.json"><meta property="og:title" content="v0.15: Process scheduling & Heatmap"><meta property="og:image" content="https://flexmeasures.io/media/posts/33/daily-activity-heatmap-2.png"><meta property="og:image:width" content="1154"><meta property="og:image:height" content="355"><meta property="og:site_name" content="FlexMeasures"><meta property="og:description" content="Version v0.15 of FlexMeasures brings the ability to schedule energy processes and adds a new data visualization: Daily activity heatmap. Finally, we add API support for managing sensors. See changelog&hellip;"><meta property="og:url" content="https://flexmeasures.io/015-process-scheduling-heatmap/"><meta property="og:type" content="article"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@seitabv"><meta name="twitter:title" content="v0.15: Process scheduling & Heatmap"><meta name="twitter:description" content="Version v0.15 of FlexMeasures brings the ability to schedule energy processes and adds a new data visualization: Daily activity heatmap. Finally, we add API support for managing sensors. See changelog&hellip;"><meta name="twitter:image" content="https://flexmeasures.io/media/posts/33/daily-activity-heatmap-2.png"><style>:root{--primary-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--secondary-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}</style><link rel="stylesheet" href="https://flexmeasures.io/assets/css/fontawesome-all.min.css?v=dbf9d822cefe851ba6f66e1ad57e8987"><link rel="stylesheet" href="https://flexmeasures.io/assets/css/style.css?v=f294491bf2aaace2c249324545609f9e"><noscript><link rel="stylesheet" href="https://flexmeasures.io/assets/css/noscript.css?v=6228c7eee614cd200a2cad8333b439fa"></noscript><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://flexmeasures.io/015-process-scheduling-heatmap/"},"headline":"v0.15: Process scheduling & Heatmap","datePublished":"2023-08-07T13:07","dateModified":"2025-04-01T18:51","image":{"@type":"ImageObject","url":"https://flexmeasures.io/media/posts/33/daily-activity-heatmap-2.png","height":355,"width":1154},"description":"Version v0.15 of FlexMeasures brings the ability to schedule energy processes and adds a new data visualization: Daily activity heatmap. Finally, we add API support for managing sensors. See changelog&hellip;","author":{"@type":"Person","name":"SeitaBV","url":"https://flexmeasures.io/authors/seitabv/"},"publisher":{"@type":"Organization","name":"SeitaBV"}}</script><style>#wrapper > .bg {
               background-image: url(https://flexmeasures.io/assets/images/overlay.png), linear-gradient(0deg, rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1)), url(https://flexmeasures.io/media/website/karsten-wurth-tzkyLKPvL4-unsplash-2.jpg);
           }</style><script>var _paq = window._paq = window._paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="//matomo.seita.nl/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '3']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
  })();</script></head><body class="is-preload"><div class="github-ribbon"><a target="_blank" href="https://github.com/FlexMeasures/flexmeasures/">View code on Github</a></div><div id="wrapper"><header id="header"><a class="logo" href="https://flexmeasures.io/">FlexMeasures</a></header><nav id="nav"><ul class="links"><li class="has-submenu"><a href="https://flexmeasures.io/" target="_self" aria-haspopup="true">Why?</a><ul class="nav__submenu level-2" aria-hidden="true"><li><a href="https://flexmeasures.io/plugins/" target="_self">Plugins</a></li><li><a href="https://flexmeasures.io/use-cases/" target="_self">Use cases</a></li><li><a href="https://flexmeasures.io/features-2/" target="_self">Features</a></li><li><a href="https://flexmeasures.io/why-is-the-code-of-flexmeasures-open-for-everyone/" target="_self">Open source</a></li></ul></li><li><a href="https://flexmeasures.io/documentation/" target="_self">Docs</a></li><li><a href="https://flexmeasures.io/tags/blogpost/" target="_self">Blog</a></li><li><a href="https://flexmeasures.io/plugins/" target="_self">Plugins</a></li><li><a href="https://flexmeasures.io/roadmap/" target="_self">Roadmap</a></li><li><a href="https://flexmeasures.io/faq/" target="_self">FAQ</a></li><li><a href="https://flexmeasures.io/get-in-touch/" target="_self">Contact</a></li></ul></nav><main id="main"><article class="post"><header class="major"><time datetime="2023-08-07T13:07" class="date">7 Aug 2023</time><h1>v0.15: Process scheduling &amp; Heatmap</h1><p class="post__inner"></p></header><figure class="image main"><img src="https://flexmeasures.io/media/posts/33/daily-activity-heatmap-2.png" srcset="https://flexmeasures.io/media/posts/33/responsive/daily-activity-heatmap-2-xs.png 300w, https://flexmeasures.io/media/posts/33/responsive/daily-activity-heatmap-2-sm.png 480w, https://flexmeasures.io/media/posts/33/responsive/daily-activity-heatmap-2-md.png 768w, https://flexmeasures.io/media/posts/33/responsive/daily-activity-heatmap-2-lg.png 1024w, https://flexmeasures.io/media/posts/33/responsive/daily-activity-heatmap-2-xl.png 1360w" sizes="(max-width: 1360px) 100vw, 1360px" loading="lazy" height="355" width="1154" alt="Activity Heatmap example"></figure><div class="post__inner post__entry"><div class="post__inner post__entry"><p>Version v0.15 of FlexMeasures brings the ability to schedule energy processes and adds a new data visualization: Daily activity heatmap. Finally, we add API support for managing sensors.</p><p><a href="https://flexmeasures.readthedocs.io/latest/changelog.html#v0-15-0-august-09-2023" target="_blank" rel="noopener noreferrer">See changelog</a> for a complete list or read on below about the larger new features we added.</p><h2>Scheduling energy processes</h2><p>FlexMeasures' <a href="https://flexmeasures.readthedocs.io/en/latest/concepts/device_scheduler.html" target="_blank" rel="noopener noreferrer">in-built device scheduler</a> works best for storage devices like batteries or heat buffers, which can have any flow. We sometimes encounter situations where the flexibility lies in a steady process, which has to happen during some time window. Usually, this is a feature in process-heavy industry settings like water purification or paper manufacturing.</p><p>We have now added the process scheduler to be used in such scenarios. Let's say you need a process which takes 45 kW of power, and it needs to run 14 hours before tomorrow ― you have 10 hours of flexibility! Given some cost signal (like prices, or CO2), you can tell FlexMeasures to find the best running times. </p><p>Here is an overview of what you can tell FlexMeasures about your process optimization needs (this is the flex model):</p><ul><li><span class="blob-code-inner blob-code-marker js-code-nav-pass" data-code-marker="+"><code><span class="pl-c1"><span class="pl-token">power</span></span></code>: <span class="pl-token">nominal</span> <span class="pl-token">power</span> <span class="pl-token">of</span> <span class="pl-token">the</span> <span class="pl-token">process</span></span></li><li><span class="blob-code-inner blob-code-marker js-code-nav-pass" data-code-marker="+"><code><span class="pl-c1"><span class="pl-token">duration</span></span></code>: <span class="pl-token">time</span> <span class="pl-token">that</span> <span class="pl-token">the</span> <span class="pl-token">process</span> <span class="pl-token">lasts</span></span></li><li><span class="blob-code-inner blob-code-marker js-code-nav-pass" data-code-marker="+"><code><span class="pl-c1"><span class="pl-token">optimization_sense</span></span></code>: <span class="pl-token">objective</span> <span class="pl-token">of</span> <span class="pl-token">the</span> <span class="pl-token">scheduler</span>, to <span class="pl-token">maximize</span> <span class="pl-token">or</span> <span class="pl-token">minimize</span></span></li><li><span class="blob-code-inner blob-code-marker js-code-nav-pass" data-code-marker="+"><code><span class="pl-c1"><span class="pl-token">time_restrictions</span></span></code>: <span class="pl-token">time</span> <span class="pl-token">periods</span> <span class="pl-token">in</span> <span class="pl-token">which</span> <span class="pl-token">the</span> <span class="pl-token">load</span> <span class="pl-token">cannot</span> <span class="pl-token">be</span> <span class="pl-token">schedule</span> <span class="pl-token">to</span></span></li><li><span class="blob-code-inner blob-code-marker js-code-nav-pass" data-code-marker="+"><code><span class="pl-c1"><span class="pl-token">load_type</span></span></code>: <span class="pl-token">Inflexible</span>, <span class="pl-token">Breakable</span> <span class="pl-token">or</span> <span class="pl-token">Shiftable</span></span></li></ul><p>Note the load_type:</p><p>Plus, in <a href="https://flexmeasures.readthedocs.io/en/latest/api/notation.html#flex-context" target="_blank" rel="noopener noreferrer">the flexibility context</a>, you can (as usual) add a <code>consumption-price-sensor</code>.</p><p>This scheduler is available through the API when you <a href="https://flexmeasures.readthedocs.io/en/latest/api/v3_0.html#post--api-v3_0-sensors-(id)-schedules-trigger">trigger a new schedule for a sensor</a> on an asset with type "process" or "load".</p><p>We also made a CLI command for computing schedules like this:</p><pre class="notranslate"><code class="notranslate">flexmeasures add schedule for-process <br>    --sensor-id 4 --process-type SHIFTABLE</code><code class="notranslate">    --start 2023-07-23T00:00:00+01:00 <br>    --duration PT24H --process-duration PT4H --process-power 0.4MW</code><code class="notranslate">    --consumption-price-sensor 2 <br>    --forbid '{"start": "${TOMORROW}T14:00:00+02:00", "duration" : "PT1H"}'</code></pre><p>We documented usage of this new scheduler <a href="https://flexmeasures.readthedocs.io/en/latest/tut/toy-example-process.html" target="_blank" rel="noopener noreferrer">in a tutorial</a>.</p><p>This work was done in Pull Requests <a href="http://www.github.com/flexmeasures/flexmeasures/pull/729" target="_blank" rel="noopener noreferrer">729</a>, <a href="http://www.github.com/flexmeasures/flexmeasures/pull/768" target="_blank" rel="noopener noreferrer">768</a>, and <a href="http://www.github.com/flexmeasures/flexmeasures/pull/777" target="_blank" rel="noopener noreferrer">777</a>. </p><h2>New data visualization: Daily activity heatmap</h2><p>Heatmaps are great ways to spot the hotspots of activity. Usually heatmaps are actually geographical maps. In our context, the most interesting background is time ― so we'd like to see activity hotspots on a map of time intervals.</p><p>We chose the "time map" of weekdays. From our experience, this is where you see the most interesting activity hotspots at a glance. For instance, that mornings often experience peaks. Or that Tuesday afternoons have low energy use, for some reason.</p><p>Here is how it looks like for one week of temperature data:</p><figure class="post__image post__image--center"><figure class="post__image post__image--center"><img src="https://flexmeasures.io/media/posts/33/Screenshot-from-2023-07-29-17-09-18.png" alt="Temperature data in new heatmap" width="800" height="239" loading="lazy" sizes="(max-width: 48em) 100vw, 768px" srcset="https://flexmeasures.io/media/posts/33/responsive/Screenshot-from-2023-07-29-17-09-18-xs.png 300w, https://flexmeasures.io/media/posts/33/responsive/Screenshot-from-2023-07-29-17-09-18-sm.png 480w, https://flexmeasures.io/media/posts/33/responsive/Screenshot-from-2023-07-29-17-09-18-md.png 768w, https://flexmeasures.io/media/posts/33/responsive/Screenshot-from-2023-07-29-17-09-18-lg.png 1024w, https://flexmeasures.io/media/posts/33/responsive/Screenshot-from-2023-07-29-17-09-18-xl.png 1360w, https://flexmeasures.io/media/posts/33/responsive/Screenshot-from-2023-07-29-17-09-18-2xl.png 1600w"></figure><figcaption>It's easy to see which days had milder temperatures.</figcaption></figure><p>And here are 4 days of (dis)-charging patterns in Seita's <a href="https://v2g-liberty.eu/" target="_blank" rel="noopener noreferrer">V2GLiberty</a> project:</p><figure class="post__image post__image--center"><figure class="post__image post__image--center"><img src="https://flexmeasures.io/media/posts/33/DailyMatrix-NissanLeaf.png" alt="" width="800" height="249" loading="lazy" sizes="(max-width: 48em) 100vw, 768px" srcset="https://flexmeasures.io/media/posts/33/responsive/DailyMatrix-NissanLeaf-xs.png 300w, https://flexmeasures.io/media/posts/33/responsive/DailyMatrix-NissanLeaf-sm.png 480w, https://flexmeasures.io/media/posts/33/responsive/DailyMatrix-NissanLeaf-md.png 768w, https://flexmeasures.io/media/posts/33/responsive/DailyMatrix-NissanLeaf-lg.png 1024w, https://flexmeasures.io/media/posts/33/responsive/DailyMatrix-NissanLeaf-xl.png 1360w, https://flexmeasures.io/media/posts/33/responsive/DailyMatrix-NissanLeaf-2xl.png 1600w"></figure><figcaption>Charging (blue) mostly happens in sunshine hours, discharging during high-price hours (morning &amp; evening)</figcaption></figure><p>So on a technical level, the daily heatmap is essentially a heatmap of the sensor's values, with dates on the y-axis and time of day on the x-axis. For individual devices, it gives an insight into the device's running times. A new button lets users switch between charts.</p><p>This work was done in Pull Request <a href="http://www.github.com/flexmeasures/flexmeasures/pull/715" target="_blank" rel="noopener noreferrer">715</a>.</p><h2>Manage sensors in API</h2><p>Until now, it was possible to work on assets via the FlexMeasures API, but it had no CRUD capabilities for sensors. We now added GET, POST, PATCH and DELETE endpoints, so talking to FlexMeasures from the outside becomes more powerful. Custom frontends or installations using <a href="https://pypi.org/project/flexmeasures-client/" target="_blank" rel="noopener noreferrer">the FlexMeasures Client</a> can fully build up complete asset-sensor structures on their own (the client will be updated to reflect this soon).</p><p>This work was done in Pull Requests <a href="http://www.github.com/flexmeasures/flexmeasures/pull/759" target="_blank" rel="noopener noreferrer">759</a>, <a href="http://www.github.com/flexmeasures/flexmeasures/pull/767" target="_blank" rel="noopener noreferrer">767</a>, <a href="http://www.github.com/flexmeasures/flexmeasures/pull/773" target="_blank" rel="noopener noreferrer">773</a> and <a href="http://www.github.com/flexmeasures/flexmeasures/pull/784" target="_blank" rel="noopener noreferrer">784</a>.</p></div></div></article></main><footer id="copyright"><ul><li>© Massively</li><li>Design: <a href="https://html5up.net" target="_blank" rel="nofollow noopener">HTML5 UP</a></li><li>Powered by <a href="https://getpublii.com" target="_blank" rel="nofollow noopener">Publii</a></li><li>Follow updates by <a href="https://flexmeasures.io/feed.xml" title="Our RSS feed" target="_blank" rel="noopener">RSS</a></li></ul></footer></div><script src="https://flexmeasures.io/assets/js/jquery.min.js?v=220afd743d9e9643852e31a135a9f3ae"></script><script src="https://flexmeasures.io/assets/js/jquery.scrollex.min.js?v=f89065e3d988006af9791b44561d7c90"></script><script src="https://flexmeasures.io/assets/js/jquery.scrolly.min.js?v=1ed5a78bde1476875a40f6b9ff44fc14"></script><script src="https://flexmeasures.io/assets/js/browser.min.js?v=c07298dd19048a8a69ad97e754dfe8d0"></script><script src="https://flexmeasures.io/assets/js/breakpoints.min.js?v=81a479eb099e3b187613943b085923b8"></script><script src="https://flexmeasures.io/assets/js/util.min.js?v=4201a626f8c9b614a663b3a1d7d82615"></script><script src="https://flexmeasures.io/assets/js/main.min.js?v=149e72e3ae18744a477b480b19e0c6da"></script><script>/*<![CDATA[*/var images=document.querySelectorAll("img[loading]");for(var i=0;i<images.length;i++){if(images[i].complete){images[i].classList.add("is-loaded")}else{images[i].addEventListener("load",function(){this.classList.add("is-loaded")},false)}};/*]]>*/</script><script type="text/javascript">$('.post__inner:has(.post__iframe)').css('max-width', 'none');</script></body></html>