<!DOCTYPE html><html lang="en-us"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><title>v0.6.0: Multi-tenancy &amp; error monitoring  - FlexMeasures</title><meta name="description" content="Version v0.6.0 of FlexMeasures is out (see changelog). The two most notable new features are that users and assets now belong to accounts (allowing for multi-tenancy setups), and that it's&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://flexmeasures.io/v060-multi-tenancy-error-monitoring/"><link rel="alternate" type="application/atom+xml" href="https://flexmeasures.io/feed.xml"><link rel="alternate" type="application/json" href="https://flexmeasures.io/feed.json"><meta property="og:title" content="v0.6.0: Multi-tenancy & error monitoring "><meta property="og:image" content="https://flexmeasures.io/media/posts/17/landon-martin-_UQgnpzyVo0-unsplash.jpg"><meta property="og:site_name" content="FlexMeasures"><meta property="og:description" content="Version v0.6.0 of FlexMeasures is out (see changelog). The two most notable new features are that users and assets now belong to accounts (allowing for multi-tenancy setups), and that it's&hellip;"><meta property="og:url" content="https://flexmeasures.io/v060-multi-tenancy-error-monitoring/"><meta property="og:type" content="article"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@seitabv"><meta name="twitter:title" content="v0.6.0: Multi-tenancy & error monitoring "><meta name="twitter:description" content="Version v0.6.0 of FlexMeasures is out (see changelog). The two most notable new features are that users and assets now belong to accounts (allowing for multi-tenancy setups), and that it's&hellip;"><meta name="twitter:image" content="https://flexmeasures.io/media/posts/17/landon-martin-_UQgnpzyVo0-unsplash.jpg"><style>:root{--primary-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--secondary-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}</style><link rel="stylesheet" href="https://flexmeasures.io/assets/css/fontawesome-all.min.css?v=dbf9d822cefe851ba6f66e1ad57e8987"><link rel="stylesheet" href="https://flexmeasures.io/assets/css/style.css?v=768d7a2849ea3d878ea8826bf28d1734"><noscript><link rel="stylesheet" href="https://flexmeasures.io/assets/css/noscript.css?v=6228c7eee614cd200a2cad8333b439fa"></noscript><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://flexmeasures.io/v060-multi-tenancy-error-monitoring/"},"headline":"v0.6.0: Multi-tenancy & error monitoring ","datePublished":"2021-09-03T18:57","dateModified":"2021-09-03T19:03","image":{"@type":"ImageObject","url":"https://flexmeasures.io/media/posts/17/landon-martin-_UQgnpzyVo0-unsplash.jpg","height":3648,"width":5472},"description":"Version v0.6.0 of FlexMeasures is out (see changelog). The two most notable new features are that users and assets now belong to accounts (allowing for multi-tenancy setups), and that it's&hellip;","author":{"@type":"Person","name":"SeitaBV"},"publisher":{"@type":"Organization","name":"SeitaBV"}}</script><style>#wrapper > .bg {
               background-image: url(https://flexmeasures.io/assets/images/overlay.png), linear-gradient(0deg, rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1)), url(https://flexmeasures.io/media/website/karsten-wurth-tzkyLKPvL4-unsplash-2.jpg);
           }</style><script>var _paq = window._paq = window._paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="//matomo.seita.nl/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '3']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
  })();</script></head><body class="is-preload"><div class="github-ribbon"><a target="_blank" href="https://github.com/FlexMeasures/flexmeasures/">View code on Github</a></div><div id="wrapper"><header id="header"><a class="logo" href="https://flexmeasures.io/">FlexMeasures</a></header><nav id="nav"><ul class="links"><li class="has-submenu"><a href="https://flexmeasures.io/" target="_self" aria-haspopup="true">Why?</a><ul class="nav__submenu level-2" aria-hidden="true"><li><a href="https://flexmeasures.io/plugins/" target="_self">Plugins</a></li><li><a href="https://flexmeasures.io/use-cases/" target="_self">Use cases</a></li><li><a href="https://flexmeasures.io/features-2/" target="_self">Features</a></li><li><a href="https://flexmeasures.io/why-is-the-code-of-flexmeasures-open-for-everyone/" target="_self">Open source</a></li></ul></li><li><a href="https://flexmeasures.io/documentation/" target="_self">Docs</a></li><li><a href="https://flexmeasures.io/tags/blogpost/" target="_self">Blog</a></li><li><a href="https://flexmeasures.io/plugins/" target="_self">Plugins</a></li><li><a href="https://flexmeasures.io/roadmap/" target="_self">Roadmap</a></li></ul></nav><main id="main"><article class="post"><header class="major"><time datetime="2021-09-03T18:57" class="date">3 Sep 2021</time><h1>v0.6.0: Multi-tenancy &amp; error monitoring </h1><p class="post__inner"></p></header><figure class="image main"><img src="https://flexmeasures.io/media/posts/17/landon-martin-_UQgnpzyVo0-unsplash.jpg" srcset="https://flexmeasures.io/media/posts/17/responsive/landon-martin-_UQgnpzyVo0-unsplash-xs.jpg 300w, https://flexmeasures.io/media/posts/17/responsive/landon-martin-_UQgnpzyVo0-unsplash-sm.jpg 480w, https://flexmeasures.io/media/posts/17/responsive/landon-martin-_UQgnpzyVo0-unsplash-md.jpg 768w, https://flexmeasures.io/media/posts/17/responsive/landon-martin-_UQgnpzyVo0-unsplash-lg.jpg 1024w, https://flexmeasures.io/media/posts/17/responsive/landon-martin-_UQgnpzyVo0-unsplash-xl.jpg 1360w" sizes="(max-width: 1360px) 100vw, 1360px" loading="lazy" height="3648" width="5472" alt="Eggs, by Landon Martin"><figcaption>Eggs, by Landon Martin</figcaption></figure><div class="post__inner post__entry"><p>Version v0.6.0 of FlexMeasures is out (<a href="https://flexmeasures.readthedocs.io/en/latest/changelog.html#v0-6-0-september-3-2021" target="_blank" rel="noopener noreferrer">see changelog</a>). The two most notable new features are that users and assets now belong to accounts (allowing for multi-tenancy setups), and that it's now possible to monitor for things going wrong (and be able to react in time).</p><h2>Multi-tenancy</h2><p>We envision that there'll be one FlexMeasures server run per ESCO. However, they have multiple customers. Of course, we want to treat them differently in terms of what they see and also silo their data from other customers.</p><p>We updated the data model ― we added an account table, to which users and assets are connected. Accounts can also have roles. We made use of these account roles right away in enabling the UI to show different things to users from different (kind of) accounts, e.g. a different landing page or menu links.</p><p>This work was done in <a href="http://www.github.com/SeitaBV/flexmeasures/pull/159">Pull Request 159</a> and <a href="http://www.github.com/SeitaBV/flexmeasures/pull/163">Pull Request 163</a>.</p><h2>Error monitoring</h2><p>When you run a FlexMeasures server, you want to stay on top of things going wrong. We added two ways of doing that:</p><ol><li>You can connect to Sentry, so that all errors will be sent to your Sentry account. Add the token you got from Sentry in the <em>SENTRY_DNS</em> config setting and you're up and running! See <a href="http://www.github.com/SeitaBV/flexmeasures/pull/143">Pull Request 143</a>.</li><li>Another source of crucial errors are things that did not even happen! For instance, a task to import prices from a day-ahead market, which you depend on later for scheduling. We added a new CLI task called <em>flexmeasures monitor tasks, </em>so you can be alerted when tasks have not successfully run at least so-and-so many minutes ago. The alerts will also come in via Sentry, but you can also send them to email addresses with the config setting <em>FLEXMEASURES_MONITORING_MAIL_RECIPIENTS. </em>See <a href="http://www.github.com/SeitaBV/flexmeasures/pull/146">Pull Request 146</a>.</li></ol><p>For illustration of the latter monitoring, here is one example of how we monitor tasks on a server ― the below is run in a cron script every hour:</p><p><code>flexmeasures monitor tasks --task get_weather_forecasts 60 --task get_recent_meter_data 6  --task import_epex_prices 1440</code></p><p>The first task (get_weather_forecasts) is actually supported within FlexMeasures, while the other two sit in plugins we wrote. </p><h2>Some other notable improvements</h2><ul><li>Documented how to use a custom favicon in plugins, see <a href="http://www.github.com/SeitaBV/flexmeasures/pull/152">Pull Request 152</a>. </li><li>Analytics view offers grouping of all assets by location, see <a href="http://www.github.com/SeitaBV/flexmeasures/pull/148">Pull Request 148</a>.</li><li>Allow plugins to register multiple Flask blueprints, see <a href="http://www.github.com/SeitaBV/flexmeasures/pull/171">Pull Request 171</a>.</li></ul></div></article></main><footer id="copyright"><ul><li>© Massively</li><li>Design: <a href="https://html5up.net" target="_blank" rel="nofollow noopener">HTML5 UP</a></li><li>Powered by <a href="https://getpublii.com" target="_blank" rel="nofollow noopener">Publii</a></li><li>Follow updates by <a href="https://flexmeasures.io/feed.xml" title="Our RSS feed" target="_blank" rel="noopener">RSS</a></li></ul></footer></div><script src="https://flexmeasures.io/assets/js/jquery.min.js?v=220afd743d9e9643852e31a135a9f3ae"></script><script src="https://flexmeasures.io/assets/js/jquery.scrollex.min.js?v=f89065e3d988006af9791b44561d7c90"></script><script src="https://flexmeasures.io/assets/js/jquery.scrolly.min.js?v=1ed5a78bde1476875a40f6b9ff44fc14"></script><script src="https://flexmeasures.io/assets/js/browser.min.js?v=c07298dd19048a8a69ad97e754dfe8d0"></script><script src="https://flexmeasures.io/assets/js/breakpoints.min.js?v=81a479eb099e3b187613943b085923b8"></script><script src="https://flexmeasures.io/assets/js/util.min.js?v=4201a626f8c9b614a663b3a1d7d82615"></script><script src="https://flexmeasures.io/assets/js/main.min.js?v=149e72e3ae18744a477b480b19e0c6da"></script><script>/*<![CDATA[*/var images=document.querySelectorAll("img[loading]");for(var i=0;i<images.length;i++){if(images[i].complete){images[i].classList.add("is-loaded")}else{images[i].addEventListener("load",function(){this.classList.add("is-loaded")},false)}};/*]]>*/</script><script type="text/javascript">$('.post__inner:has(.post__iframe)').css('max-width', 'none');</script></body></html>