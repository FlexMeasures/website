<!DOCTYPE html><html lang="en-us"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><title>v0.13: Overlay charts  - FlexMeasures</title><meta name="description" content="Version v0.13 of FlexMeasures lets us create dashboards with multiple graphs from various sensors layered in one plot. In addition, FlexMeasures now includes a proper page for accounts. On the&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://flexmeasures.io/013-overlay-charts/"><link rel="alternate" type="application/atom+xml" href="https://flexmeasures.io/feed.xml"><link rel="alternate" type="application/json" href="https://flexmeasures.io/feed.json"><meta property="og:title" content="v0.13: Overlay charts "><meta property="og:image" content="https://flexmeasures.io/media/posts/29/v013-preview.png"><meta property="og:image:width" content="407"><meta property="og:image:height" content="288"><meta property="og:site_name" content="FlexMeasures"><meta property="og:description" content="Version v0.13 of FlexMeasures lets us create dashboards with multiple graphs from various sensors layered in one plot. In addition, FlexMeasures now includes a proper page for accounts. On the&hellip;"><meta property="og:url" content="https://flexmeasures.io/013-overlay-charts/"><meta property="og:type" content="article"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@seitabv"><meta name="twitter:title" content="v0.13: Overlay charts "><meta name="twitter:description" content="Version v0.13 of FlexMeasures lets us create dashboards with multiple graphs from various sensors layered in one plot. In addition, FlexMeasures now includes a proper page for accounts. On the&hellip;"><meta name="twitter:image" content="https://flexmeasures.io/media/posts/29/v013-preview.png"><style>:root{--primary-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--secondary-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}</style><link rel="stylesheet" href="https://flexmeasures.io/assets/css/fontawesome-all.min.css?v=dbf9d822cefe851ba6f66e1ad57e8987"><link rel="stylesheet" href="https://flexmeasures.io/assets/css/style.css?v=f294491bf2aaace2c249324545609f9e"><noscript><link rel="stylesheet" href="https://flexmeasures.io/assets/css/noscript.css?v=6228c7eee614cd200a2cad8333b439fa"></noscript><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://flexmeasures.io/013-overlay-charts/"},"headline":"v0.13: Overlay charts ","datePublished":"2023-05-01T20:18","dateModified":"2023-05-01T20:26","image":{"@type":"ImageObject","url":"https://flexmeasures.io/media/posts/29/v013-preview.png","height":288,"width":407},"description":"Version v0.13 of FlexMeasures lets us create dashboards with multiple graphs from various sensors layered in one plot. In addition, FlexMeasures now includes a proper page for accounts. On the&hellip;","author":{"@type":"Person","name":"SeitaBV","url":"https://flexmeasures.io/authors/seitabv/"},"publisher":{"@type":"Organization","name":"SeitaBV"}}</script><style>#wrapper > .bg {
               background-image: url(https://flexmeasures.io/assets/images/overlay.png), linear-gradient(0deg, rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1)), url(https://flexmeasures.io/media/website/karsten-wurth-tzkyLKPvL4-unsplash-2.jpg);
           }</style><script>var _paq = window._paq = window._paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="//matomo.seita.nl/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '3']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
  })();</script></head><body class="is-preload"><div class="github-ribbon"><a target="_blank" href="https://github.com/FlexMeasures/flexmeasures/">View code on Github</a></div><div id="wrapper"><header id="header"><a class="logo" href="https://flexmeasures.io/">FlexMeasures</a></header><nav id="nav"><ul class="links"><li class="has-submenu"><a href="https://flexmeasures.io/" target="_self" aria-haspopup="true">Why?</a><ul class="nav__submenu level-2" aria-hidden="true"><li><a href="https://flexmeasures.io/plugins/" target="_self">Plugins</a></li><li><a href="https://flexmeasures.io/use-cases/" target="_self">Use cases</a></li><li><a href="https://flexmeasures.io/features-2/" target="_self">Features</a></li><li><a href="https://flexmeasures.io/why-is-the-code-of-flexmeasures-open-for-everyone/" target="_self">Open source</a></li></ul></li><li><a href="https://flexmeasures.io/documentation/" target="_self">Docs</a></li><li><a href="https://flexmeasures.io/tags/blogpost/" target="_self">Blog</a></li><li><a href="https://flexmeasures.io/plugins/" target="_self">Plugins</a></li><li><a href="https://flexmeasures.io/roadmap/" target="_self">Roadmap</a></li><li><a href="https://flexmeasures.io/faq/" target="_self">FAQ</a></li><li><a href="https://flexmeasures.io/get-in-touch/" target="_self">Contact</a></li></ul></nav><main id="main"><article class="post"><header class="major"><time datetime="2023-05-01T20:18" class="date">1 May 2023</time><h1>v0.13: Overlay charts </h1><p class="post__inner"></p></header><figure class="image main"><img src="https://flexmeasures.io/media/posts/29/v013-preview.png" srcset="https://flexmeasures.io/media/posts/29/responsive/v013-preview-xs.png 300w, https://flexmeasures.io/media/posts/29/responsive/v013-preview-sm.png 480w, https://flexmeasures.io/media/posts/29/responsive/v013-preview-md.png 768w, https://flexmeasures.io/media/posts/29/responsive/v013-preview-lg.png 1024w, https://flexmeasures.io/media/posts/29/responsive/v013-preview-xl.png 1360w" sizes="(max-width: 1360px) 100vw, 1360px" loading="lazy" height="288" width="407" alt="Overlaid charts"></figure><div class="post__inner post__entry"><p>Version v0.13 of FlexMeasures lets us create dashboards with multiple graphs from various sensors layered in one plot. In addition, FlexMeasures now includes a proper page for accounts.</p><p>On the backend, we protect the CPU from re-computing the same schedule over and over again if a rogue client asks for that.</p><p><a href="https://flexmeasures.readthedocs.io/en/latest/changelog.html#v0-13-0-may-1-2023" target="_blank" rel="noopener noreferrer">See changelog</a> for a complete list or read on below about the larger new features we added.</p><h2>Overlay charts</h2><p>With FlexMeasures, you can adapt the dashboard shown on the page for any asset. By default, you see a plot per sensor. With the <code>sensors_to_show</code> attribute, it was already possible to remove and even add plots (e.g. public price data), to create the dashboard with maximum information value.</p><p>We wanted to make the dashboards more informative, as often users want to study effects of one sensor's data on others.</p><p>Now, sensor numbers in <code>sensors_to_show</code> can be layered, e.g. <code>[1, [3,6]]</code> will lead to two plots, where the second shows two sensors together.</p><p>As a bonus, plots are distinguished by source (different trace), sensor (different color) and source type (different stroke dash).</p><p>Here is an example (see the overlay of EV charging and PV supply in the lower graph):</p><figure class="post__image"><img loading="lazy" src="https://flexmeasures.io/media/posts/29/layered-chart.png" alt="A layered chart from Seita's V2G living lab" width="800" height="375" sizes="(max-width: 48em) 100vw, 768px" srcset="https://flexmeasures.io/media/posts/29/responsive/layered-chart-xs.png 300w, https://flexmeasures.io/media/posts/29/responsive/layered-chart-sm.png 480w, https://flexmeasures.io/media/posts/29/responsive/layered-chart-md.png 768w, https://flexmeasures.io/media/posts/29/responsive/layered-chart-lg.png 1024w, https://flexmeasures.io/media/posts/29/responsive/layered-chart-xl.png 1360w, https://flexmeasures.io/media/posts/29/responsive/layered-chart-2xl.png 1600w"><figcaption>A layered chart from Seita's V2G living lab</figcaption></figure><p><span style="color: var(--text-primary-color); font-family: var(--editor-font-family); font-size: inherit; font-weight: var(--font-weight-normal);">This work was done in Pull Request </span><a href="http://www.github.com/flexmeasures/flexmeasures/pull/534" target="_blank" rel="noopener noreferrer">534</a><span style="color: var(--text-primary-color); font-family: var(--editor-font-family); font-size: inherit; font-weight: var(--font-weight-normal);">.</span></p><h2>Account page</h2><p>FlexMeasures is not just a single-purpose program ― it's a platform which can sit in the cloud and serve multiple sites. To manage these sites when they have different asset owners, the concept of accounts matters a lot. An account might for instance be a SME, with several local energy assets and also several employees (who might or might not have a FlexMeasures user account)</p><p>That's why we worked on showing accounts better in the UI and API (in the CLI they are already represented well). The endpoints <code><cite>/accounts</cite></code> (to list accounts) and <code><cite>/accounts/&lt;id&gt;</cite></code> (to show one account) both work in the UI and (via <code>/api/v3_0/</code>) in the API.</p><p>We tried to make this useful both for users (looking at their own account) and admins (looking at all accounts). In the future, we hope to work on "consulting accounts", who have the right to administer several other accounts (their clients), making FlexMeasures a potential B2B2B platform! </p><p>This work was done in Pull Request <a href="http://www.github.com/flexmeasures/flexmeasures/pull/605">605</a>.</p><h2>Avoid re-computing the same schedule</h2><p><span style="color: var(--text-primary-color); font-family: var(--editor-font-family); font-size: inherit; font-weight: var(--font-weight-normal);">Computing schedules is where FlexMeasures creates its value, and also where it does the heavier CPU work. The more different sites we serve, the more we learn that it's crucial to protect this CPU work.</span></p><p><span style="color: var(--text-primary-color); font-family: var(--editor-font-family); font-size: inherit; font-weight: var(--font-weight-normal);">Triggering schedules is easy, computing them is hard.<br>Here is an example scenario: A rogue client might trigger the same schedule multiple times ― a simple error, but overloading our server with work. In this feature, we enable FlexMeasures to notice that the same computation is already done or currently ongoing. This means not starting the computation again, and also informing the caller with the right status.</span></p><p>Technically, we now cache the job, so that before FlexMeasures creates a new one, it can look up if the equivalent already exists somewhere in the queue. Interesting architectural work!</p><p><span style="color: var(--text-primary-color); font-family: var(--editor-font-family); font-size: inherit; font-weight: var(--font-weight-normal);">This work was done in Pull Request </span><a href="http://www.github.com/flexmeasures/flexmeasures/pull/616" target="null">616</a><span style="color: var(--text-primary-color); font-family: var(--editor-font-family); font-size: inherit; font-weight: var(--font-weight-normal);">.</span></p><h2>API sunsetting</h2><p>Finally, as <a href="https://flexmeasures.readthedocs.io/en/latest/dev/note-on-datamodel-transition.html#note-on-datamodel-transition">our long journey to a more flexible datamodel</a> is coming close to completion, we are sunsetting (as we pre-announced in version 0.12) API versions below 3. Please help your users upgrade to API version 3 before you use FlexMeasures v0.13!</p><p>We compiled <a href="https://flexmeasures.readthedocs.io/en/latest/api/introduction.html#deprecation-and-sunset" target="_blank" rel="noopener noreferrer">some helpful information for FlexMeasures hosts </a>to manage this transition well.  </p><p><span style="color: var(--text-primary-color); font-family: var(--editor-font-family); font-size: inherit; font-weight: var(--font-weight-normal);">This work was done in Pull Request <a href="http://www.github.com/flexmeasures/flexmeasures/pull/650">650</a>.</span></p></div></article></main><footer id="copyright"><ul><li>© Massively</li><li>Design: <a href="https://html5up.net" target="_blank" rel="nofollow noopener">HTML5 UP</a></li><li>Powered by <a href="https://getpublii.com" target="_blank" rel="nofollow noopener">Publii</a></li><li>Follow updates by <a href="https://flexmeasures.io/feed.xml" title="Our RSS feed" target="_blank" rel="noopener">RSS</a></li></ul></footer></div><script src="https://flexmeasures.io/assets/js/jquery.min.js?v=220afd743d9e9643852e31a135a9f3ae"></script><script src="https://flexmeasures.io/assets/js/jquery.scrollex.min.js?v=f89065e3d988006af9791b44561d7c90"></script><script src="https://flexmeasures.io/assets/js/jquery.scrolly.min.js?v=1ed5a78bde1476875a40f6b9ff44fc14"></script><script src="https://flexmeasures.io/assets/js/browser.min.js?v=c07298dd19048a8a69ad97e754dfe8d0"></script><script src="https://flexmeasures.io/assets/js/breakpoints.min.js?v=81a479eb099e3b187613943b085923b8"></script><script src="https://flexmeasures.io/assets/js/util.min.js?v=4201a626f8c9b614a663b3a1d7d82615"></script><script src="https://flexmeasures.io/assets/js/main.min.js?v=149e72e3ae18744a477b480b19e0c6da"></script><script>/*<![CDATA[*/var images=document.querySelectorAll("img[loading]");for(var i=0;i<images.length;i++){if(images[i].complete){images[i].classList.add("is-loaded")}else{images[i].addEventListener("load",function(){this.classList.add("is-loaded")},false)}};/*]]>*/</script><script type="text/javascript">$('.post__inner:has(.post__iframe)').css('max-width', 'none');</script></body></html>